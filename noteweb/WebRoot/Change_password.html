<!DOCTYPE html>
<html>
<head>
<title>修改密码</title>
<meta charset="utf-8">
<link rel="stylesheet" href="styles/icon.css"/>
<link rel="stylesheet" href="styles/main.css"/>
<link rel="stylesheet" href="styles/login.css"/>
<script type="text/javascript" src="scripts/baseValue.js">
</script>
<script type="text/javascript" src="scripts/jquery.min.js">
</script>
<script type="text/javascript" src="scripts/login/login.js">
</script>
<script type="text/javascript" src="scripts/regist/regist.js">
</script>
<script type="text/javascript" src="scripts/login/login_callback.js">
</script>
<script type="text/javascript" src="scripts/cookie_util.js">
</script>
<script type="text/javascript" src="scripts/base64.js">
</script>
</head>
	<body>
	<!-- alert_background-->
	<div class="opacity_bg" style='display:none'></div>
	<!-- alert_notebook -->
	<div id="can"></div>
		<div class="global">
			<div class="sig sig_in" tabindex='4' id='zc'>
				<dl>
					<dt>
						<div class='header'>
							<h3>修改密码</h3>
						</div>
					</dt>
					<dt></dt>
					<dt>
						<div class='letter'>
							原密码:&nbsp;<input type="password" name="" id="last_password" tabindex='1'/>
							<div class='warning' id='warning_1'><span>原始密码错误</span></div>
						</div>
					</dt>
					<dt>
						<div class='letter'>
							新密码:&nbsp;<input type="password" name="" id="new_password" tabindex='2'/>
							<div class='warning' id='warning_2'><span>新密码长度过短</span></div>
						</div>
					</dt>
					<dt>
						<div class='password'>
							确认新密码:&nbsp;<input type="password" name="" id="final_password" tabindex='3'/>
							<div class='warning' id='warning_3'><span>密码输入不一致</span></div>
						</div>
					</dt>
					<dt>
						<div>
							<input type="button" name="" id="changePassword" value='&nbsp;确&nbsp;定&nbsp;' tabindex='4'/>
							<input type="button" name="" id="back" value='&nbsp;关&nbsp;闭&nbsp;' tabindex='5'/>
        <script type="text/javascript" src="scripts/alert_util.js"></script>
							<script type="text/javascript">
							var flog = false;
							function get(e){
								return document.getElementById(e);
							}
							get('back').onclick=function(){
								get('zc').className='sig sig_out';
								window.history.back();
								/*window.opener=null;
								window.open('','_self');
								window.close();*/
							}
							function last(){
								var lpassword=get('last_password').value.trim();
								if(validOldPwd(lpassword)){
									get('warning_1').style.display='none';
									flog++;
								}else{
									get('warning_1').style.display='block';
									return false;
								}
							}
							function finall(){
								
								var npassword=get('new_password').value;
								var fpassword=get('final_password').value;
								if(npassword!=fpassword){
									get('warning_3').style.display='block';
									return false;
								}else{
									return true;
								}
							}
							function newp(){
								var npassword=get('new_password').value.length;
								if(npassword<6){
									get('warning_2').style.display='block';
									return false;
								}else{
									return true;
								}
							}
							window.onload=function(){
								get('last_password').onblur=last;
								
								get('final_password').onblur=finall;
								get('new_password').onblur=newp;
								get('new_password').onfocus=function(){
									get('warning_2').style.display='none';
								}
								get('final_password').onfocus=function(){
									get('warning_3').style.display='none';
								}
								$("#changePassword").click(function(){
									if(newp()&finall()){
										var npassword=get('new_password').value.trim();
										var lpassword=get('last_password').value.trim();
										changepwd(lpassword,npassword);
									}
									
								})
								
							}
							</script>
						</div>
					</dt>
				</dl>
			</div>
		</div>
	</body>
</html>